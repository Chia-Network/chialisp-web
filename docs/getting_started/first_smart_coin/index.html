<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.6">
<title data-react-helmet="true">First Smart Coin | Chialisp</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://chialisp.com/docs/getting_started/first_smart_coin"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="First Smart Coin | Chialisp"><meta data-react-helmet="true" name="description" content="By now, you should understand what Chialisp is and how you can use it to write programs and modules that can be run on the command-line. In this guide, we are going to write a simple puzzle, use it to lock a coin with a password, and finally spend it. This example is insecure for a variety of reasons which will be explained after, but it&#x27;s a good tool for learning how smart coins work."><meta data-react-helmet="true" property="og:description" content="By now, you should understand what Chialisp is and how you can use it to write programs and modules that can be run on the command-line. In this guide, we are going to write a simple puzzle, use it to lock a coin with a password, and finally spend it. This example is insecure for a variety of reasons which will be explained after, but it&#x27;s a good tool for learning how smart coins work."><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://chialisp.com/docs/getting_started/first_smart_coin"><link data-react-helmet="true" rel="alternate" href="https://chialisp.com/docs/getting_started/first_smart_coin" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://chialisp.com/docs/getting_started/first_smart_coin" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.35749df4.css">
<link rel="preload" href="/assets/js/runtime~main.5582d1e8.js" as="script">
<link rel="preload" href="/assets/js/main.3d802437.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_OuoZ">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><img src="/img/logo.svg" alt="Chialisp Logo" class="themedImage_TMUO themedImage--light_4Vu1 navbar__logo"><img src="/img/logo.svg" alt="Chialisp Logo" class="themedImage_TMUO themedImage--dark_uzRr navbar__logo"><b class="navbar__title">Chialisp</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/">Docs</a><a href="https://chia.net" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>Chia.net<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><a href="https://github.com/Chia-Network/chialisp-web" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></div><div class="navbar__items navbar__items--right"><div class="react-toggle toggle_2i4l react-toggle--disabled"><div class="react-toggle-track" role="button" tabindex="-1"><div class="react-toggle-track-check"><span class="toggle_iYfV">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_iYfV">ðŸŒž</span></div><div class="react-toggle-thumb"></div></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div><div class="navbar__search searchBarContainer_I7kZ"><input placeholder="Search" aria-label="Search" class="navbar__search-input"><div class="loadingRing_Zg7X searchBarLoadingRing_J5Ez"><div></div><div></div><div></div><div></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_lDyR"><button class="clean-btn backToTopButton_i9tI" type="button"><svg viewBox="0 0 24 24" width="28"><path d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z" fill="currentColor"></path></svg></button><aside class="docSidebarContainer_0YBq"><div class="sidebar_a3j0"><nav class="menu thin-scrollbar menu_cyFh menuWithAnnouncementBar_+O1J"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#">Getting Started</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/docs/getting_started/intro_to_chialisp">Intro to Chialisp</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/docs/getting_started/setting_up_testnet">Setting up the Testnet</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/getting_started/first_smart_coin">First Smart Coin</a></li></ul></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Chialisp</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Tutorials</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">CLVM</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/docs/glossary">Glossary</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/docs/faq">FAQ</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/docs/resources">Resources</a></li></ul></nav></div></aside><main class="docMainContainer_r8cw"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_zHA2"><div class="docItemContainer_oiyr"><article><div class="tocCollapsible_aw-L theme-doc-toc-mobile tocMobile_Tx6Y"><button type="button" class="clean-btn tocCollapsibleButton_zr6a">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>First Smart Coin</h1></header><p>By now, you should understand what Chialisp is and how you can use it to write programs and modules that can be run on the command-line. In this guide, we are going to write a simple <strong>puzzle</strong>, use it to lock a <strong>coin</strong> with a password, and finally spend it. This example is insecure for a variety of reasons which will be explained after, but it&#x27;s a good tool for learning how smart coins work.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_y2LR" id="prerequisites"></a>Prerequisites<a class="hash-link" href="#prerequisites" title="Direct link to heading">#</a></h2><p>The previous guide detailed how to set up the testnet. You will need to follow it to continue.</p><div class="admonition admonition-tip alert alert--success"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</h5></div><div class="admonition-content"><p>While this guide can be followed on the command-line like the first, we recommend writing more complicated Chialisp programs like this one that you plan on reusing in a text editor of your choice, then using the command-line to compile it and use the RPC commands.</p></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_y2LR" id="password-puzzle"></a>Password Puzzle<a class="hash-link" href="#password-puzzle" title="Direct link to heading">#</a></h2><p>Write the following Chialisp code in a file named <code>password.clsp</code>:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI chialisp"><pre tabindex="0" class="prism-code language-chialisp codeBlock_rtdJ thin-scrollbar" style="color:#383a42;background-color:#fafafa;font-weight:bold"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">;;; This puzzle locks coins with a password.</span></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">;;; It should not be used for production purposes.</span></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">;;; Use a password that has no meaning to you, preferably random.</span></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">(mod (</span></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">        PASSWORD_HASH ; This is the sha256 hash of the password.</span></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">        password ; This is the original password used in the password hash.</span></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">        conditions ; An arbitrary list of conditions to output.</span></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">    )</span></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">    ; If the hash of the password matches,</span></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">    (if (= (sha256 password) PASSWORD_HASH)</span></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">        ; Output the conditions list.</span></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">        conditions</span></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">        ; Otherwise, throw an error.</span></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">        (x)</span></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">    )</span></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">)</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><ol><li>The puzzle takes in a <strong>curried in</strong> value <code>PASSWORD_HASH</code>.</li><li>The solution takes in the <code>password</code> and desired <code>conditions</code>.</li><li>If the hash of the password matches the curried in value, output the <code>conditions</code>.</li><li>Otherwise, throw an error to prevent the spend from occurring.</li></ol><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_y2LR" id="puzzles"></a>Puzzles<a class="hash-link" href="#puzzles" title="Direct link to heading">#</a></h2><p>We&#x27;ve mentioned previously that Chialisp can be used to write puzzles, but you may be wondering what exactly a puzzle is. A puzzle is a special module that is used to lock a coin with a set of rules. These rules affect how and when they can be spent, and what happens when they are.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_y2LR" id="currying"></a>Currying<a class="hash-link" href="#currying" title="Direct link to heading">#</a></h3><p>Currying is similar to creating a constant in the puzzle, except that it can be redefined as something else either programmatically or on the command-line with every use. It&#x27;s the ideal pattern when creating a general purpose puzzle that requires external information, since you wouldn&#x27;t want to hard code it and change it every time.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_y2LR" id="conditions"></a>Conditions<a class="hash-link" href="#conditions" title="Direct link to heading">#</a></h3><p>A condition consists of a condition number followed by its arguments. They can do a variety of things, from the creation of new coins and requiring other spends to happen at the same time, to various assertions related to the state of the blockchain.</p><p>A complete list of conditions can be found <a href="https://chialisp.com/docs/coins_spends_and_wallets#conditions" target="_blank" rel="noopener noreferrer">here</a>, but we will only be using one in this tutorial: condition <code>51</code>, or <code>CREATE_COIN</code>, creates a new coin with the given <code>puzzle_hash</code> and <code>amount</code> if the spend is valid. It is used to send money to another puzzle hash (which is analagous to an address).</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_y2LR" id="coins"></a>Coins<a class="hash-link" href="#coins" title="Direct link to heading">#</a></h2><p>Everything on the Chia Blockchain, including the standard transactions used to move money between wallets, is a coin. Coins are identified by their id, which is just a <a href="https://en.wikipedia.org/wiki/Cryptographic_hash_function" target="_blank" rel="noopener noreferrer">sha256 hashed</a> representation of the following three components:</p><ul><li><code>parent_coin_id</code>, which is the id of the coin that created this one.</li><li><code>puzzle_hash</code>, which is the hash of the puzzle used to spend the coin.</li><li><code>amount</code>, which is the amount of money locked with the coin, in mojos (a trillionth of an XCH).</li></ul><p>Multiple coins can have the same puzzle hash, and a coin can create multiple children. The only limitation is that no two coins can have the same parent, puzzle hash, and amount, as their ids would be the same.</p><p>A coin can be spent by revealing its puzzle and providing a solution. The solution is then passed to its puzzle, which outputs a list of conditions.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_y2LR" id="putting-it-together"></a>Putting it Together<a class="hash-link" href="#putting-it-together" title="Direct link to heading">#</a></h2><p>We will now use these concepts and the <code>password.clsp</code> file you just wrote to create and spend a coin.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_y2LR" id="creating-the-coin"></a>Creating the Coin<a class="hash-link" href="#creating-the-coin" title="Direct link to heading">#</a></h3><div class="admonition admonition-danger alert alert--danger"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path fill-rule="evenodd" d="M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"></path></svg></span>danger</h5></div><div class="admonition-content"><p>Don&#x27;t use a password that you use or plan to use for anything else, as this is not a secure smart coin. The most ideal choice for this is any number of random characters of your choice, such as <code>x7h2dDkE</code>. Just write it down for later.</p></div></div><p>The first step is to curry the puzzle with the password&#x27;s hash and get the puzzle hash and puzzle reveal:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#383a42;background-color:#fafafa;font-weight:bold"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">opc -H </span><span class="token string" style="color:#B35C00;font-weight:normal">&quot;$(cdv clsp curry password.clsp --args &quot;$(run &quot;(sha256 &#x27;password&#x27;)&quot;</span><span class="token punctuation" style="color:#383a42">)</span><span class="token string" style="color:#B35C00;font-weight:normal">&quot;)&quot;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>Write down both values this produces, the first one being the puzzle hash, and the second being the puzzle reveal.</p><p>You can convert the puzzle hash to an address and send funds to it like so:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#383a42;background-color:#fafafa;font-weight:bold"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">cdv encode --prefix txch </span><span class="token string" style="color:#B35C00;font-weight:normal">&quot;PuzzleHash&quot;</span><span class="token plain"></span></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">chia wallet send --amount </span><span class="token number" style="color:#B35C00;font-weight:normal">0.01</span><span class="token plain"> --fee </span><span class="token number" style="color:#B35C00;font-weight:normal">0.00005</span><span class="token plain"> --address </span><span class="token string" style="color:#B35C00;font-weight:normal">&quot;txch1Address&quot;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>This will send 10 billion mojos with a fee of 100 million mojos (the current recommended amount to get the transaction to go through quickly) to the address you specify, therefore creating your coin!</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_y2LR" id="spending-the-coin"></a>Spending the Coin<a class="hash-link" href="#spending-the-coin" title="Direct link to heading">#</a></h3><p>There&#x27;s only one thing left to do, which is to spend the coin that we just created. We are going to be using a few RPC calls to do this.</p><p>First, we need to find the coin that we just created by its puzzle hash:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#383a42;background-color:#fafafa;font-weight:bold"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">cdv rpc coinrecords --only-unspent --by puzzlehash </span><span class="token string" style="color:#B35C00;font-weight:normal">&quot;PuzzleHash&quot;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>Take note of the values in the <code>coin</code> object in the output.</p><p>Get the puzzle hash of your wallet address:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#383a42;background-color:#fafafa;font-weight:bold"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">chia wallet get_address</span></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">cdv decode </span><span class="token string" style="color:#B35C00;font-weight:normal">&quot;txch1WalletAddress&quot;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><div class="admonition admonition-caution alert alert--warning"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>caution</h5></div><div class="admonition-content"><p>Make sure you put the <code>0x</code> prefix in front of the wallet&#x27;s puzzle hash in this command. It isn&#x27;t required for the other commands, but in this case it will compile as a string without it, which you don&#x27;t want.</p></div></div><p>Then, get the solution in hex, with the password and your wallet puzzle hash:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#383a42;background-color:#fafafa;font-weight:bold"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">opc </span><span class="token string" style="color:#B35C00;font-weight:normal">&quot;(&#x27;password&#x27; </span><span class="token string variable punctuation" style="color:#383a42;font-weight:normal;font-style:italic">((</span><span class="token string variable number" style="color:#B35C00;font-weight:normal;font-style:italic">51</span><span class="token string variable" style="color:#B35C00;font-weight:normal;font-style:italic"> </span><span class="token string variable number" style="color:#B35C00;font-weight:normal;font-style:italic">0</span><span class="token string variable" style="color:#B35C00;font-weight:normal;font-style:italic">xWalletPuzzleHash </span><span class="token string variable number" style="color:#B35C00;font-weight:normal;font-style:italic">9900000000</span><span class="token string variable punctuation" style="color:#383a42;font-weight:normal;font-style:italic">))</span><span class="token string" style="color:#B35C00;font-weight:normal">)&quot;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>This will produce a solution with the password that will create a new coin with the amount minus a fee of 100 million mojos. A coin will go back to your wallet when you spend the coin with this solution.</p><p>We will not be using an aggregated signature for the spend bundle, so we will specify the signature equivalent of zero. Just paste the long value in the below spend bundle.</p><p>Use the coin information you gathered with the <code>coinrecords</code> command, the <code>puzzle_reveal</code> from the first <code>opc</code> command you ran, and the <code>solution</code> from the second.</p><p>Write the following in a file named <code>spendbundle.json</code>:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI json"><pre tabindex="0" class="prism-code language-json codeBlock_rtdJ thin-scrollbar" style="color:#383a42;background-color:#fafafa;font-weight:bold"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token punctuation" style="color:#383a42">{</span><span class="token plain"></span></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">  </span><span class="token property">&quot;coin_spends&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#383a42">[</span><span class="token plain"></span></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">    </span><span class="token punctuation" style="color:#383a42">{</span><span class="token plain"></span></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">      </span><span class="token property">&quot;coin&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#383a42">{</span><span class="token plain"></span></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">        </span><span class="token property">&quot;amount&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token number" style="color:#B35C00;font-weight:normal">10000000000</span><span class="token punctuation" style="color:#383a42">,</span><span class="token plain"></span></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">        </span><span class="token property">&quot;parent_coin_info&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:#B35C00;font-weight:normal">&quot;0xParentCoinInfo&quot;</span><span class="token punctuation" style="color:#383a42">,</span><span class="token plain"></span></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">        </span><span class="token property">&quot;puzzle_hash&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:#B35C00;font-weight:normal">&quot;0xPuzzleHash&quot;</span><span class="token plain"></span></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">      </span><span class="token punctuation" style="color:#383a42">}</span><span class="token punctuation" style="color:#383a42">,</span><span class="token plain"></span></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">      </span><span class="token property">&quot;puzzle_reveal&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:#B35C00;font-weight:normal">&quot;PuzzleReveal&quot;</span><span class="token punctuation" style="color:#383a42">,</span><span class="token plain"></span></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">      </span><span class="token property">&quot;solution&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:#B35C00;font-weight:normal">&quot;Solution&quot;</span><span class="token plain"></span></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">    </span><span class="token punctuation" style="color:#383a42">}</span><span class="token plain"></span></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">  </span><span class="token punctuation" style="color:#383a42">]</span><span class="token punctuation" style="color:#383a42">,</span><span class="token plain"></span></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">  </span><span class="token property">&quot;aggregated_signature&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:#B35C00;font-weight:normal">&quot;0xc00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000&quot;</span><span class="token plain"></span></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain"></span><span class="token punctuation" style="color:#383a42">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>Finally, run the following command to push the transaction to the Testnet:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#383a42;background-color:#fafafa;font-weight:bold"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">cdv rpc pushtx spendbundle.json</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>If all went well, this should spend the coin! Otherwise, retrace your steps carefully to try to find what went wrong. If you still can&#x27;t figure it out, don&#x27;t hesitate to ask us on our <a href="https://keybase.io/team/chia_network.public" target="_blank" rel="noopener noreferrer">Keybase</a> and we will answer as soon as we can.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_y2LR" id="potential-questions"></a>Potential Questions<a class="hash-link" href="#potential-questions" title="Direct link to heading">#</a></h2><p>Here are some questions you may have had when creating and spending the coin.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_y2LR" id="why-allow-arbitrary-conditions"></a>Why Allow Arbitrary Conditions?<a class="hash-link" href="#why-allow-arbitrary-conditions" title="Direct link to heading">#</a></h3><p>We allow any conditions to be passed in the solution. While you might think that for this example we would only need to create a single coin, this allows us to reserve network fees, or to enable more complicated functionality later such as interacting with other spends. In this example, we will only use the create coin condition in this list.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_y2LR" id="why-are-password-coins-insecure"></a>Why are Password Coins Insecure?<a class="hash-link" href="#why-are-password-coins-insecure" title="Direct link to heading">#</a></h3><p>When you spend one or more coins, the puzzle and its solution go into the <a href="https://docs.chia.net/docs/06mempool/mempool" target="_blank" rel="noopener noreferrer">mempool</a> until the block is inevitably farmed. This means that anyone can read the password in plain text during this time, or after the coin is spent.</p><p>A simple solution to that would be to use a new random password every time you create a coin. However, a malicious farmer can actually change the solution to spends however they would like before adding it to their block. In doing so, they could change where the money will go in order to steal the coin.</p><p>While there are other ways, the most common solution to that is to simply require a <a href="https://en.wikipedia.org/wiki/BLS_digital_signature" target="_blank" rel="noopener noreferrer">digital signature</a> instead of a password. This is a cryptographically secure way of ensuring that the solution is not tampered with. If it is, the spend will no longer be valid. We will worry about this in a future guide, so you can safely ignore this concept for now.</p><p>So, while a password example is a good idea for learning and testing purposes, it is certainly not feasible for real-world use.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_y2LR" id="conclusion"></a>Conclusion<a class="hash-link" href="#conclusion" title="Direct link to heading">#</a></h2><p>This is only scratching the surface of what&#x27;s possible to do with smart coins on the Chia Blockchain. But it&#x27;s a good foundation of understanding for more complicated examples to come. Every guide in this series builds off of the others, so make sure to take a break to let it soak in, and refresh your memory on concepts that you need to when you come back. We&#x27;re looking forward to the awesome things you will build with this technology!</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/Chia-Network/chialisp-web/edit/main/docs/getting_started/first_smart_coin.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_mS5F" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_mt2f"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/getting_started/setting_up_testnet"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« Setting up the Testnet</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Language Overview Â»</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_vrFS thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#prerequisites" class="table-of-contents__link">Prerequisites</a></li><li><a href="#password-puzzle" class="table-of-contents__link">Password Puzzle</a></li><li><a href="#puzzles" class="table-of-contents__link">Puzzles</a><ul><li><a href="#currying" class="table-of-contents__link">Currying</a></li><li><a href="#conditions" class="table-of-contents__link">Conditions</a></li></ul></li><li><a href="#coins" class="table-of-contents__link">Coins</a></li><li><a href="#putting-it-together" class="table-of-contents__link">Putting it Together</a><ul><li><a href="#creating-the-coin" class="table-of-contents__link">Creating the Coin</a></li><li><a href="#spending-the-coin" class="table-of-contents__link">Spending the Coin</a></li></ul></li><li><a href="#potential-questions" class="table-of-contents__link">Potential Questions</a><ul><li><a href="#why-allow-arbitrary-conditions" class="table-of-contents__link">Why Allow Arbitrary Conditions?</a></li><li><a href="#why-are-password-coins-insecure" class="table-of-contents__link">Why are Password Coins Insecure?</a></li></ul></li><li><a href="#conclusion" class="table-of-contents__link">Conclusion</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs">Getting Started</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/ref/clvm">CLVM Reference</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items"><li class="footer__item"><a href="https://developers.chia.net/" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Chia Developers Forum<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://keybase.io/team/chia_network.public" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Keybase<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://twitter.com/chia_project" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items"><li class="footer__item"><a href="https://www.chia.net/blog/" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Blog<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://github.com/Chia-Network/clvm" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="margin-bottom--sm"><a class="footerLogoLink_SRtH" href="/"><img src="/img/full_logo_white.svg" alt="Chialisp full logo" class="themedImage_TMUO themedImage--light_4Vu1 footer__logo"><img src="/img/full_logo_white.svg" alt="Chialisp full logo" class="themedImage_TMUO themedImage--dark_uzRr footer__logo"></a></div><div class="footer__copyright">Â© 2022 Chia Network Inc., Licensed under the <a href="https://github.com/Chia-Network/chialisp-web/blob/main/LICENSE" target="_blank">Apache License, Version 2.0</a> | <a href="https://www.chia.net/terms">Terms</a></div></div></div></footer></div>
<script src="/assets/js/runtime~main.5582d1e8.js"></script>
<script src="/assets/js/main.3d802437.js"></script>
</body>
</html>