<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-chialisp-primer/first-smart-coin" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.9.2">
<title data-rh="true">4. First Smart Coin | Chialisp</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://chialisp.com/chialisp-first-smart-coin/"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="4. First Smart Coin | Chialisp"><meta data-rh="true" name="description" content="By now, you should understand what Chialisp is and how you can use it to write programs and modules that can be run on the command-line. In this guide, we are going to write a simple puzzle, use it to lock a coin with a password, and finally spend it. This example is insecure for a variety of reasons which will be explained after, but it&#x27;s a good tool for learning how smart coins work."><meta data-rh="true" property="og:description" content="By now, you should understand what Chialisp is and how you can use it to write programs and modules that can be run on the command-line. In this guide, we are going to write a simple puzzle, use it to lock a coin with a password, and finally spend it. This example is insecure for a variety of reasons which will be explained after, but it&#x27;s a good tool for learning how smart coins work."><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://chialisp.com/chialisp-first-smart-coin/"><link data-rh="true" rel="alternate" href="https://chialisp.com/chialisp-first-smart-coin/" hreflang="en"><link data-rh="true" rel="alternate" href="https://chialisp.com/chialisp-first-smart-coin/" hreflang="x-default"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Chialisp Primer","item":"https://chialisp.com/chialisp-primer"},{"@type":"ListItem","position":2,"name":"4. First Smart Coin","item":"https://chialisp.com/chialisp-first-smart-coin"}]}</script><script src="/js/matomo.js" async defer="defer"></script><link rel="stylesheet" href="/assets/css/styles.bb770339.css">
<script src="/assets/js/runtime~main.8df72f8a.js" defer="defer"></script>
<script src="/assets/js/main.aeb02a9d.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",t||"light"),document.documentElement.setAttribute("data-theme-choice",t||"light")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><link rel="preload" as="image" href="/img/logo.svg"><link rel="preload" as="image" href="/img/full_logo_white.svg"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="Chialisp Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/logo.svg" alt="Chialisp Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Chialisp</b></a><a href="https://docs.chia.net" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Chia Docs<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a><a href="https://docs.chia.net/academy-home/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Chia Academy<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><a href="https://chia.net" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Chia.net<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a><a href="https://github.com/Chia-Network/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><div class="navbar__search searchBarContainer_NW3z" dir="ltr"><input placeholder="Search" aria-label="Search" class="navbar__search-input searchInput_YFbd" value=""><div class="loadingRing_RJI3 searchBarLoadingRing_YnHq"><div></div><div></div><div></div><div></div></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/"><span title="Introduction" class="linkLabel_WmDU">Introduction</span></a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--active" href="/chialisp-primer/"><span title="Chialisp Primer" class="categoryLinkLabel_W154">Chialisp Primer</span></a><button aria-label="Collapse sidebar category &#x27;Chialisp Primer&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/chialisp-primer/intro/"><span title="1. Intro to Chialisp" class="linkLabel_WmDU">1. Intro to Chialisp</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/chialisp-using-modules/"><span title="2. Using Modules" class="linkLabel_WmDU">2. Using Modules</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/chialisp-testnet-setup/"><span title="3. Testnet Setup" class="linkLabel_WmDU">3. Testnet Setup</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/chialisp-first-smart-coin/"><span title="4. First Smart Coin" class="linkLabel_WmDU">4. First Smart Coin</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/chialisp-bls-signatures/"><span title="5. BLS Signatures" class="linkLabel_WmDU">5. BLS Signatures</span></a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" href="/chialisp-concepts/"><span title="Chialisp Concepts" class="categoryLinkLabel_W154">Chialisp Concepts</span></a><button aria-label="Expand sidebar category &#x27;Chialisp Concepts&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/commands/"><span title="Commands" class="linkLabel_WmDU">Commands</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/syntax/"><span title="Syntax" class="linkLabel_WmDU">Syntax</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/modern-chialisp/"><span title="Modern Chialisp" class="linkLabel_WmDU">Modern Chialisp</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/operators/"><span title="Operators" class="linkLabel_WmDU">Operators</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/examples/"><span title="Examples" class="linkLabel_WmDU">Examples</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/costs/"><span title="Costs" class="linkLabel_WmDU">Costs</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/conditions/"><span title="Conditions" class="linkLabel_WmDU">Conditions</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/optimization/"><span title="Optimization" class="linkLabel_WmDU">Optimization</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/common_issues/"><span title="Common Issues" class="linkLabel_WmDU">Common Issues</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/attacks-and-countermeasures/"><span title="Attacks and Countermeasures" class="linkLabel_WmDU">Attacks and Countermeasures</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/debugging/"><span title="Debugging" class="linkLabel_WmDU">Debugging</span></a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/standard-transactions/"><span title="Primitives" class="categoryLinkLabel_W154">Primitives</span></a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/clvm/"><span title="CLVM" class="linkLabel_WmDU">CLVM</span></a></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><a class="breadcrumbs__link" href="/chialisp-primer/"><span>Chialisp Primer</span></a></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">4. First Smart Coin</span></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>4. First Smart Coin</h1></header><p>By now, you should understand what Chialisp is and how you can use it to write programs and modules that can be run on the command-line. In this guide, we are going to write a simple <strong>puzzle</strong>, use it to lock a <strong>coin</strong> with a password, and finally spend it. This example is insecure for a variety of reasons which will be explained after, but it&#x27;s a good tool for learning how smart coins work.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="prerequisites">Prerequisites<a href="#prerequisites" class="hash-link" aria-label="Direct link to Prerequisites" title="Direct link to Prerequisites" translate="no">​</a></h2>
<p>The previous guide detailed how to set up the testnet. You will need to follow it to continue.</p>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_BuS1"><p>While this guide can be followed on the command-line like the first, we recommend writing more complicated Chialisp programs like this one that you plan on reusing in a text editor of your choice, then using the command-line to compile it and use the RPC commands.</p></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="password-puzzle">Password Puzzle<a href="#password-puzzle" class="hash-link" aria-label="Direct link to Password Puzzle" title="Direct link to Password Puzzle" translate="no">​</a></h2>
<p>Write the following Chialisp code in a file named <code>password.clsp</code>:</p>
<div class="language-chialisp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#383a42;--prism-background-color:#fafafa"><div class="codeBlockTitle_OeMC">password.clsp</div><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-chialisp codeBlock_bY9V thin-scrollbar" style="color:#383a42;background-color:#fafafa;font-weight:bold"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">;;; This puzzle locks coins with a password.</span><br></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">;;; It should not be used for production purposes.</span><br></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">;;; Use a password that has no meaning to you, preferably random.</span><br></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">(mod (</span><br></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">        PASSWORD_HASH ; This is the sha256 hash of the password.</span><br></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">        password ; This is the original password used in the password hash.</span><br></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">        conditions ; An arbitrary list of conditions to output.</span><br></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">    )</span><br></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">    ; If the hash of the password matches,</span><br></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">    (if (= (sha256 password) PASSWORD_HASH)</span><br></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">        ; Output the conditions list.</span><br></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">        conditions</span><br></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">        ; Otherwise, throw an error.</span><br></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">        (x)</span><br></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">    )</span><br></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">)</span><br></span></code></pre></div></div>
<ol>
<li class="">The puzzle takes in a <strong>curried in</strong> value <code>PASSWORD_HASH</code>.</li>
<li class="">The solution takes in the <code>password</code> and desired <code>conditions</code>.</li>
<li class="">If the hash of the password matches the curried in value, output the <code>conditions</code>.</li>
<li class="">Otherwise, throw an error to prevent the spend from occurring.</li>
</ol>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="puzzles">Puzzles<a href="#puzzles" class="hash-link" aria-label="Direct link to Puzzles" title="Direct link to Puzzles" translate="no">​</a></h2>
<p>We&#x27;ve mentioned previously that Chialisp can be used to write puzzles, but you may be wondering what exactly a puzzle is. A puzzle is a special module that is used to lock a coin with a set of rules. These rules affect how and when they can be spent, and what happens when they are.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="currying">Currying<a href="#currying" class="hash-link" aria-label="Direct link to Currying" title="Direct link to Currying" translate="no">​</a></h3>
<p>Currying can be thought of as defining the value of function parameters before it is called. This is usually used with modules to allow the same puzzle to be reused for multiple different scenarios.</p>
<p>In this example, the curried in <code>PASSWORD_HASH</code> represents the hash of the password that is required to spend the coin. Not every instance of this puzzle will have the same password, so we create a parameter and curry the value when we actually make an instance of this puzzle.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="conditions">Conditions<a href="#conditions" class="hash-link" aria-label="Direct link to Conditions" title="Direct link to Conditions" translate="no">​</a></h3>
<p>A condition consists of a condition number followed by its arguments. They can do a variety of things, from the creation of new coins and requiring other spends to happen at the same time, to various assertions related to the state of the blockchain.</p>
<p>A complete list of conditions can be found on the <a class="" href="/conditions/">Conditions page</a>, but we will only be using one in this tutorial: condition <code>51</code>, or <code>CREATE_COIN</code>, creates a new coin with the given <code>puzzle_hash</code> and <code>amount</code> if the spend is valid. It is used to send money to another puzzle hash (which is analogous to an address).</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="coins">Coins<a href="#coins" class="hash-link" aria-label="Direct link to Coins" title="Direct link to Coins" translate="no">​</a></h2>
<p>Everything on the Chia Blockchain, including the standard transactions used to move money between wallets, is a coin. Coins are identified by their id, which is just a <a href="https://en.wikipedia.org/wiki/Cryptographic_hash_function" target="_blank" rel="noopener noreferrer" class="">sha256 hashed</a> representation of the following three components:</p>
<ul>
<li class=""><code>parent_coin_id</code>, which is the id of the coin that created this one.</li>
<li class=""><code>puzzle_hash</code>, which is the hash of the puzzle used to spend the coin.</li>
<li class=""><code>amount</code>, which is the amount of money locked with the coin, in mojos (a trillionth of an XCH).</li>
</ul>
<p>Multiple coins can have the same puzzle hash, and a coin can create multiple children. The only limitation is that no two coins can have the same parent, puzzle hash, and amount, as their ids would be the same.</p>
<p>A coin can be spent by revealing its puzzle and providing a solution. The solution is then passed to its puzzle, which outputs a list of conditions.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="putting-it-together">Putting it Together<a href="#putting-it-together" class="hash-link" aria-label="Direct link to Putting it Together" title="Direct link to Putting it Together" translate="no">​</a></h2>
<p>We will now use these concepts and the <code>password.clsp</code> file you just wrote to create and spend a coin.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="creating-the-coin">Creating the Coin<a href="#creating-the-coin" class="hash-link" aria-label="Direct link to Creating the Coin" title="Direct link to Creating the Coin" translate="no">​</a></h3>
<div class="theme-admonition theme-admonition-danger admonition_xJq3 alert alert--danger"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"></path></svg></span>danger</div><div class="admonitionContent_BuS1"><p>Don&#x27;t use a password that you use or plan to use for anything else, as this is not a secure smart coin. The most ideal choice for this is any number of random characters of your choice, such as <code>x7h2dDkE</code>. Just write it down for later.</p></div></div>
<p>The first step is to curry the puzzle with the password&#x27;s hash and get the puzzle hash and puzzle reveal:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#383a42;--prism-background-color:#fafafa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#383a42;background-color:#fafafa;font-weight:bold"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">opc -H &quot;$(cdv clsp curry password.clsp --args &quot;$(run &quot;(sha256 &#x27;password&#x27;)&quot;)&quot;)&quot;</span><br></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">opc &quot;$(cdv clsp curry password.clsp --args &quot;$(run &quot;(sha256 &#x27;password&#x27;)&quot;)&quot;)&quot;</span><br></span></code></pre></div></div>
<p>Write down both values this produces, the first one being the puzzle hash, and the second being the puzzle reveal.</p>
<p>You can convert the puzzle hash to an address and send funds to it like so:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#383a42;--prism-background-color:#fafafa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#383a42;background-color:#fafafa;font-weight:bold"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">cdv encode --prefix txch &quot;PuzzleHash&quot;</span><br></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">chia wallet send --amount 0.01 --fee 0.00005 --address &quot;txch1Address&quot;</span><br></span></code></pre></div></div>
<p>This will send 10 billion mojos with a fee of 100 million mojos (the current recommended amount to get the transaction to go through quickly) to the address you specify, therefore creating your coin!</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="spending-the-coin">Spending the Coin<a href="#spending-the-coin" class="hash-link" aria-label="Direct link to Spending the Coin" title="Direct link to Spending the Coin" translate="no">​</a></h3>
<p>There&#x27;s only one thing left to do, which is to spend the coin that we just created. We are going to be using a few RPC calls to do this.</p>
<p>First, we need to find the coin that we just created by its puzzle hash:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#383a42;--prism-background-color:#fafafa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#383a42;background-color:#fafafa;font-weight:bold"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">cdv rpc coinrecords --only-unspent --by puzzlehash &quot;PuzzleHash&quot;</span><br></span></code></pre></div></div>
<p>Take note of the values in the <code>coin</code> object in the output.</p>
<p>Get the puzzle hash of your wallet address:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#383a42;--prism-background-color:#fafafa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#383a42;background-color:#fafafa;font-weight:bold"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">chia wallet get_address</span><br></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">cdv decode &quot;txch1WalletAddress&quot;</span><br></span></code></pre></div></div>
<div class="theme-admonition theme-admonition-caution admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>caution</div><div class="admonitionContent_BuS1"><p>Make sure you put the <code>0x</code> prefix in front of the wallet&#x27;s puzzle hash in this command. It isn&#x27;t required for the other commands, but in this case it will compile as a string without it, which you don&#x27;t want.</p></div></div>
<p>Then, get the solution in hex, with the password and your wallet puzzle hash:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#383a42;--prism-background-color:#fafafa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#383a42;background-color:#fafafa;font-weight:bold"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">opc &quot;(&#x27;password&#x27; ((51 0xWalletPuzzleHash 9900000000)))&quot;</span><br></span></code></pre></div></div>
<p>This will produce a solution with the password that will create a new coin with the amount minus a fee of 100 million mojos. A coin will go back to your wallet when you spend the coin with this solution.</p>
<p>We will not be using an aggregated signature for the spend bundle, so we will specify the signature equivalent of zero. Just paste the long value in the below spend bundle.</p>
<p>Use the coin information you gathered with the <code>coinrecords</code> command, the <code>puzzle_reveal</code> from the first <code>opc</code> command you ran, and the <code>solution</code> from the second.</p>
<p>Write the following in a file named <code>spendbundle.json</code>:</p>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#383a42;--prism-background-color:#fafafa"><div class="codeBlockTitle_OeMC">spendbundle.json</div><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#383a42;background-color:#fafafa;font-weight:bold"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token punctuation" style="color:#383a42">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">  </span><span class="token property">&quot;coin_spends&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#383a42">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">    </span><span class="token punctuation" style="color:#383a42">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">      </span><span class="token property">&quot;coin&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#383a42">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">        </span><span class="token property">&quot;amount&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token number" style="color:#B35C00;font-weight:normal">10000000000</span><span class="token punctuation" style="color:#383a42">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">        </span><span class="token property">&quot;parent_coin_info&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:#B35C00;font-weight:normal">&quot;0xParentCoinInfo&quot;</span><span class="token punctuation" style="color:#383a42">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">        </span><span class="token property">&quot;puzzle_hash&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:#B35C00;font-weight:normal">&quot;0xPuzzleHash&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">      </span><span class="token punctuation" style="color:#383a42">}</span><span class="token punctuation" style="color:#383a42">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">      </span><span class="token property">&quot;puzzle_reveal&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:#B35C00;font-weight:normal">&quot;PuzzleReveal&quot;</span><span class="token punctuation" style="color:#383a42">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">      </span><span class="token property">&quot;solution&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:#B35C00;font-weight:normal">&quot;Solution&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">    </span><span class="token punctuation" style="color:#383a42">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">  </span><span class="token punctuation" style="color:#383a42">]</span><span class="token punctuation" style="color:#383a42">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">  </span><span class="token property">&quot;aggregated_signature&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:#B35C00;font-weight:normal">&quot;0xc00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain"></span><span class="token punctuation" style="color:#383a42">}</span><br></span></code></pre></div></div>
<p>Finally, run the following command to push the transaction to the Testnet:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#383a42;--prism-background-color:#fafafa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#383a42;background-color:#fafafa;font-weight:bold"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">cdv rpc pushtx spendbundle.json</span><br></span></code></pre></div></div>
<p>If all went well, this should spend the coin! Otherwise, retrace your steps carefully to try to find what went wrong. If you still can&#x27;t figure it out, don&#x27;t hesitate to ask us on our join our <a href="https://discord.gg/chia" target="_blank" rel="noopener noreferrer" class="">Discord</a> and ask in the #chialisp channel and we will answer as soon as we can.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="potential-questions">Potential Questions<a href="#potential-questions" class="hash-link" aria-label="Direct link to Potential Questions" title="Direct link to Potential Questions" translate="no">​</a></h2>
<p>Here are some questions you may have had when creating and spending the coin.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="why-allow-arbitrary-conditions">Why Allow Arbitrary Conditions?<a href="#why-allow-arbitrary-conditions" class="hash-link" aria-label="Direct link to Why Allow Arbitrary Conditions?" title="Direct link to Why Allow Arbitrary Conditions?" translate="no">​</a></h3>
<p>We allow any conditions to be passed in the solution. While you might think that for this example we would only need to create a single coin, this allows us to reserve network fees, or to enable more complicated functionality later such as interacting with other spends. In this example, we will only use the create coin condition in this list.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="why-are-password-coins-insecure">Why are Password Coins Insecure?<a href="#why-are-password-coins-insecure" class="hash-link" aria-label="Direct link to Why are Password Coins Insecure?" title="Direct link to Why are Password Coins Insecure?" translate="no">​</a></h3>
<p>When you spend one or more coins, the puzzle and its solution go into the <a href="https://docs.chia.net/mempool" target="_blank" rel="noopener noreferrer" class="">mempool</a> until the block is inevitably farmed. This means that anyone can read the password in plain text during this time, or after the coin is spent.</p>
<p>A simple solution to that would be to use a new random password every time you create a coin. However, a malicious farmer can actually change the solution to spends however they would like before adding it to their block. In doing so, they could change where the money will go in order to steal the coin.</p>
<p>While there are other ways, the most common solution to that is to simply require a <a href="https://en.wikipedia.org/wiki/BLS_digital_signature" target="_blank" rel="noopener noreferrer" class="">digital signature</a> instead of a password. This is a cryptographically secure way of ensuring that the solution is not tampered with. If it is, the spend will no longer be valid. We will worry about this in a future guide, so you can safely ignore this concept for now.</p>
<p>So, while a password example is a good idea for learning and testing purposes, it is certainly not feasible for real-world use.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="conclusion">Conclusion<a href="#conclusion" class="hash-link" aria-label="Direct link to Conclusion" title="Direct link to Conclusion" translate="no">​</a></h2>
<p>This is only scratching the surface of what&#x27;s possible to do with smart coins on the Chia Blockchain. But it&#x27;s a good foundation of understanding for more complicated examples to come. Every guide in this series builds off of the others, so make sure to take a break to let it soak in, and refresh your memory on concepts that you need to when you come back. We&#x27;re looking forward to the awesome things you will build with this technology!</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col noPrint_WFHX"><a href="https://github.com/Chia-Network/chialisp-web/blob/main/docs/chialisp-primer/first-smart-coin.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/chialisp-testnet-setup/"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">3. Testnet Setup</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/chialisp-bls-signatures/"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">5. BLS Signatures</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#prerequisites" class="table-of-contents__link toc-highlight">Prerequisites</a></li><li><a href="#password-puzzle" class="table-of-contents__link toc-highlight">Password Puzzle</a></li><li><a href="#puzzles" class="table-of-contents__link toc-highlight">Puzzles</a><ul><li><a href="#currying" class="table-of-contents__link toc-highlight">Currying</a></li><li><a href="#conditions" class="table-of-contents__link toc-highlight">Conditions</a></li></ul></li><li><a href="#coins" class="table-of-contents__link toc-highlight">Coins</a></li><li><a href="#putting-it-together" class="table-of-contents__link toc-highlight">Putting it Together</a><ul><li><a href="#creating-the-coin" class="table-of-contents__link toc-highlight">Creating the Coin</a></li><li><a href="#spending-the-coin" class="table-of-contents__link toc-highlight">Spending the Coin</a></li></ul></li><li><a href="#potential-questions" class="table-of-contents__link toc-highlight">Potential Questions</a><ul><li><a href="#why-allow-arbitrary-conditions" class="table-of-contents__link toc-highlight">Why Allow Arbitrary Conditions?</a></li><li><a href="#why-are-password-coins-insecure" class="table-of-contents__link toc-highlight">Why are Password Coins Insecure?</a></li></ul></li><li><a href="#conclusion" class="table-of-contents__link toc-highlight">Conclusion</a></li></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/operators/">Operators</a></li><li class="footer__item"><a class="footer__link-item" href="/clvm/">CLVM</a></li><li class="footer__item"><a href="https://docs.chia.net" target="_blank" rel="noopener noreferrer" class="footer__link-item">Chia Docs<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://discord.gg/chia" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://twitter.com/chia_project" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://www.chia.net/blog/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Blog<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://github.com/Chia-Network/clvm" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="margin-bottom--sm"><a class="footerLogoLink_BH7S" href="/"><img src="/img/full_logo_white.svg" alt="Chialisp full logo" class="footer__logo themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/full_logo_white.svg" alt="Chialisp full logo" class="footer__logo themedComponent_mlkZ themedComponent--dark_xIcU"></a></div><div class="footer__copyright">© 2025 Chia Network Inc., Licensed under the <a href="https://github.com/Chia-Network/chialisp-web/blob/main/LICENSE" target="_blank">Apache License, Version 2.0</a> | <a href="https://www.chia.net/terms">Terms</a></div></div></div></footer></div>
</body>
</html>